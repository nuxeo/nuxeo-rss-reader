<?xml version="1.0"?>
<component name="org.nuxeo.rss.feed.ui">

  <require>org.nuxeo.ecm.platform.forms.layouts.webapp</require>

  <extension target="org.nuxeo.ecm.platform.forms.layout.WebLayoutManager"
    point="widgets">

    <widget name="rss_title_listing" type="template">
      <labels>
        <label mode="any">label.rss.feed.title</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>data</field>
      </fields>
      <widgetModes>
        <mode value="any">view</mode>
      </widgetModes>
      <properties mode="any">
        <property name="help">help.rss.feed.title</property>
        <property name="template">/widgets/listing_rss_feed_name_widget.xhtml</property>
      </properties>
    </widget>

    <widget name="rss_url" type="text">
      <labels>
        <label mode="any">label.rss.feed.address</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>rf:rss_address</field>
      </fields>
      <properties mode="any">
        <property name="help">help.rss.feed.address</property>
        <property name="styleClass">dataInputText</property>
      </properties>
    </widget>

    <widget name="define_as_default_rss_feed_listing" type="checkbox">
      <labels>
        <label mode="any">label.rss.feed.default</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>data.rf.is_default_feed</field>
      </fields>
      <!-- <properties widgetMode="any"> -->
      <properties widgetMode="edit">
        <property name="required">true</property>
        <property name="styleClass">dataInputText</property>
        <property name="help">help.rss.feed.default</property>
      </properties>
    </widget>
    <widget name="define_as_default_rss_feed" type="checkbox">
      <labels>
        <label mode="any">label.rss.feed.default</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>rf:is_default_feed</field>
      </fields>
      <!-- <properties widgetMode="any"> -->
      <properties widgetMode="edit">
        <property name="required">true</property>
        <property name="styleClass">dataInputText</property>
        <property name="help">help.rss.feed.default</property>
      </properties>
    </widget>
    <widget name="rss_url_list" type="text">
      <labels>
        <label mode="any">label.rss.feed.address</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>data.rf.rss_address</field>
      </fields>
    </widget>

    <widget name="rss_gadget_displayed_article_count" type="int">
      <labels>
        <label mode="any">label.rss.gadget.article.count</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>rg:article_count</field>
      </fields>
      <properties widgetMode="edit">
        <property name="helpLabel">help.rss.gadget.article.count</property>
        <property name="styleClass">dataInputText</property>
      </properties>
    </widget>

    <widget name="rss_gadget_feed_max_count" type="int">
      <labels>
        <label mode="any">label.rss.gadget.feed.max.count</label>
      </labels>
      <translated>true</translated>
      <fields>
        <field>rg:max_feed_count</field>
      </fields>
      <properties widgetMode="edit">
        <property name="helpLabel">help.rss.gadget.feed.max.count</property>
        <property name="styleClass">dataInputText</property>
      </properties>
    </widget>
  </extension>

  <extension target="org.nuxeo.ecm.platform.forms.layout.WebLayoutManager"
    point="layouts">

    <layout name="rss_gadget">
      <templates>
        <template mode="any">/layouts/layout_default_template.xhtml
        </template>
      </templates>
      <rows>
        <row>
          <widget>rss_gadget_displayed_article_count</widget>
        </row>
        <row>
          <widget>rss_gadget_feed_max_count</widget>
        </row>
      </rows>
    </layout>

    <layout name="rss_display">
      <templates>
        <template mode="any">/layouts/layout_default_template.xhtml
        </template>
      </templates>
      <rows>
        <row>
          <widget>rss_url</widget>
        </row>
        <row>
          <widget>define_as_default_rss_feed</widget>
        </row>
      </rows>
    </layout>

    <layout name="rss_display_list">
      <templates>
        <template mode="any">
          /layouts/layout_listing_ajax_template.xhtml
        </template>
        <template mode="csv">
          /layouts/layout_listing_csv_template.xhtml
        </template>
        <template mode="pdf">
          /layouts/layout_listing_pdf_template.xhtml
        </template>
      </templates>
      <properties mode="any">
        <property name="showListingHeader">true</property>
        <property name="showRowEvenOddClass">true</property>
      </properties>
      <columns>
       <column>
          <properties mode="any">
            <property name="isListingSelectionBox">false</property>
            <property name="useFirstWidgetLabelAsColumnHeader">false</property>
            <property name="columnStyleClass">iconColumn</property>
          </properties>
          <properties mode="csv">
            <property name="isHidden">true</property>
          </properties>
          <properties mode="pdf">
            <property name="isHidden">true</property>
          </properties>
          <widget>listing_ajax_selection_box</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
          </properties>
          <widget>rss_title_listing</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
          </properties>
          <widget>rss_url_list</widget>
        </column>
        <column>
          <properties mode="any">
            <property name="useFirstWidgetLabelAsColumnHeader">true</property>
          </properties>
          <widget>define_as_default_rss_feed_listing</widget>
        </column>

      </columns>
    </layout>

  </extension>


</component>
